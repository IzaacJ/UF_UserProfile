# Custom User Profile Field Sprinkle


## Install
`cd` into the sprinkle directory of UserFrosting and clone as submodule:
```
git submodule add git@github.com:lcharette/UF_UserProfile.git UserProfile
```

### Install dependencies
This sprinkle requires the `FormGenerator` sprinkle. You'll find instruction on how to install it here : https://github.com/lcharette/UF_FormGenerator

### Add to the sprinkle list
Edit UserFrosting `app/sprinkles/sprinkles.json` file and add `UserProfile` to the sprinkle list to enable it.

### Update the assets build & composer
From the UserFrosting `/build` folder, run `npm run uf-assets-install`
You may also need to run `composer update` from the `app/` folder.

### Install database migrations
Go to the `migrations/` directory and run `php install.php`.

# Usage

To add a custom profile fields to any user, you simply add a [FormGenerator](https://github.com/lcharette/UF_FormGenerator) complient schema containing the `form` key as well as the traditionnal [validation schema](https://learn.userfrosting.com/routes-and-controllers/client-input/validation). The rest is generated by this Sprinkle.

For example, you can add the following to a `schema/profileFields/myFields.json` file inside your sprinkle to add a `location`, `occupation` and `gender` user field. With providing the associated locale keys, that's all you have to do to add a new user field to your UserFrosting setup.
```
{
    "location" : {
        "validators" : {
            "length" : {
                "label" : "LOCATION",
                "min" : 1,
                "max" : 255,
                "message" : "VALIDATE.LENGTH_RANGE"
            }
        },
        "form": {
            "type": "text",
            "label": "LOCATION",
            "icon": "fa-globe"
        }
    },
    "occupation" : {
        "validators" : {
            "length" : {
                "label" : "OCCUPATION",
                "min" : 1,
                "max" : 255,
                "message" : "VALIDATE.LENGTH_RANGE"
            }
        },
        "form": {
            "type": "textarea",
            "label": "OCCUPATION",
            "icon": "fa-briefcase"
        }
    },
    "gender" : {
        "validators" : {},
        "form": {
            "type": "select",
            "label": "GENDER",
            "icon": "fa-transgender",
            "options" : {
                "1" : "GENDER.MALE",
                "2" : "GENDER.FEMALE",
                "3" : "GENDER.NEUTRAL"
            }
        }
    }
}
```

# Advance use - Defining a field controller
TODO

## Permission
TODO

## Transformation
TODO

# Licence
By [Louis Charette](https://github.com/lcharette). Copyright (c) 2016, free to use in personal and commercial software as per the MIT license.
